@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Context.puml
' uncomment the following line and comment the first to use locally
' !include C4_Context.puml

LAYOUT_WITH_LEGEND()

title Обслуживание гарантийных обязательств

Person(customer, "Пользователь сайта", "Авторизированный пользователь сайта")
Person(customer2, "Пользователь 1С", "Секретарь, делает прозвон по заявке, уточняет детали.")
Person(customer3, "Служба ГО", "Сотрудники отрабатывающие заявки по гарантийному обслуживанию.")
System(site, "Сайт компании", "Форма заполнения заявки")
System(s_1S, "1С БП", "1С - куда поступают заявки")
System(s_JKH, "УЖКХ", "Система Умное ЖКХ")
System(s_Kafka, "Кафка", "Брокер сообщений")

System_Ext(mail_system, "Система оповещения", "Почта, СМС, Мессенджеры")


Rel(customer, site, "Заполняет форму на сайте")
Rel(site, s_Kafka, "Отправление данных в очередь")
Rel(s_Kafka, s_1S, "Взаимодействие")
Rel_Back(s_Kafka, s_1S, "")
Rel(customer3, s_1S, "")
Rel(customer2, s_1S, "")

Rel_Back(customer, customer2, "Уточнение деталей заявки")
Rel(s_1S, s_JKH, "Отправка оповещения")

Rel(s_1S, mail_system, "Уведомление для пользователя")
Rel_Back(customer, mail_system, "Уведомление")


@enduml